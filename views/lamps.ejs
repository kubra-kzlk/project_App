<%- include('./partials/header') %>
<main>
  <!--zoekfunctie naast zoekbalk-->
  <form action="/lamps" method="get" class="input-group p-lg-5 mx-auto">
    <select name="sortField">
      <% for (let field of sortFields) { %>
      <option value="<%= field.value %>" <%="field.selected" %>
        ><%= field.text %>
      </option>
      <% } %>
    </select>
    <button type="submit" class="btn btn-outline-primary">Sort</button>
    <!--zoekbalk-->
    <form action="/lamps" method="get" class="input-group mb-3">
      <label for="q">Search:</label>
      <input
        class="form-control"
        type="text"
        id="q"
        name="q"
        placeholder="Search for products"
        value="<%= searchQuery %>"
        aria-describedby="button-addon2"
      />
      <button
        class="btn btn-outline-secondary"
        type="submit"
        id="button-addon2"
      >
        Search
      </button>
    </form>
    <!--zoekbalk-->
  </form>
  <!--tabel met producten-->
  <div class="col-sm p-lg-5 mx-auto my-5">
    <table class="table align-middle mb-0 bg-white table-hover">
      <thead class="bg-light">
        <tr>
          <% for (let field of sortFields) { %>
          <th>
            <a
              href="?sortField=<%= field.value %>&sortDirection=<%= field.value === sortField ? sortDirection === 'asc' ? 'desc' : 'asc' : 'asc' %>"
            >
              <%= field.text %> <% if (field.value===sortField) { %> <%-
              sortDirection==='asc' ? '▲' : '▼' %> <% } %>
            </a>
          </th>
          <% } %>
          <th>details</th>
        </tr>
      </thead>
      <tbody>
        <% lamps.forEach(lamp => { %>
        <tr>
          <td>
            <div class="d-flex align-items-center">
              <img
                src="<%- lamp.foto %>"
                alt="image"
                style="width: 80px; height: 80px"
              />
              <%- lamp.naam %>
            </div>
          </td>
          <td class="fw-normal mb-1">&#8364; <%- lamp.prijs %></td>
          <td><%- lamp.id %></td>
          <td><%- lamp.kleur %></td>
          <td data-cell="Active">
            <% if(lamp.actief) {%>
            <i class="fa-solid fa-circle green"><%- lamp.actief %> </i>
            <% } else { %>
            <i class="fa-solid fa-circle red"><%- lamp.actief %> </i>
            <% } %>
          </td>
          <td>
            <button type="button" class="btn btn-link btn-sm btn-rounded">
              <a href="/lampDetail/<%= lamp.id %>" class="btn btn-primary"> view  </a>
            </button>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</main>
<%- include('./partials/footer') %>
