<%- include('./partials/header') %>

<div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
    <div class="col-md-5 p-lg-5 mx-auto my-5">
        <h1 class="display-4 font-weight-normal">LAMPS</h1>     
    </div>
</div>
<!-- Search Form -->
<form action="/lamps" method="get" class="input-group mb-3">
    <label for="q">Search:</label>
    <input class="form-control" type="text" id="q" name="search" placeholder="Search for products" value="<%= searchQuery %>" aria-describedby="button-addon2">
    <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Search</button>
</form>

<!-- Sorting Form -->
<form action="/lamps" method="get" class="input-group col-md-5 p-lg-5 mx-auto my-5">
    <select name="sortField" class="form-select">
        <option value="naam" <%= sortField === 'naam' ? 'selected' : '' %>>Name</option>
        <option value="prijs" <%= sortField === 'prijs' ? 'selected' : '' %>>Price</option>
        <option value="datum" <%= sortField === 'datum' ? 'selected' : '' %>>Date</option>
    </select>
    <select name="sortOrder" class="form-select">
        <option value="asc" <%= sortOrder === 'asc' ? 'selected' : '' %>>Ascending</option>
        <option value="desc" <%= sortOrder === 'desc' ? 'selected' : '' %>>Descending</option>
    </select>
    <button type="submit" class="btn btn-outline-primary">Sort</button>
</form>

<!-- Lamps Table -->
<div class="col-md p-lg-5 mx-auto my-5">
    <table class="table align-middle mb-0 bg-white table-hover">
        <thead class="bg-light">
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>Date</th>
                <th>Color</th>
                <th>Status</th>
                <th>Details</th>
            </tr>
        </thead>
        <tbody>
            <% lamps.forEach(lamp => { %>
            <tr>
                <td>
                    <div class="d-flex align-items-center">
                        <img src="<%- lamp.foto %>" alt="image" style="width: 80px; height: 80px">
                        <div><%- lamp.naam %></div>
                    </div>
                </td>
                <td><%- lamp.prijs.toFixed(2) %></td>
                <td><%- lamp.datum %></td>
                <td><%- lamp.kleur %></td>
                <td><span class="badge <%= lamp.actief ? 'bg-success' : 'bg-secondary' %>"><%= lamp.actief ? 'Active' : 'Inactive' %></span></td>
                <td>
                    <a href="/detail?id=<%- lamp.id %>" class="btn btn-primary">View</a>
                </td>
            </tr>
            <% }); %>
        </tbody>
    </table>
</div>

<%- include('./partials/footer') %>
