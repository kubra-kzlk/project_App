<%- include('./partials/header') %>
  <main>
      <!--zoekbalk-->
      <form action="/lamps" method="get" class="input-group mb-3" style="width: fit-content; margin: auto;">
        <label for="q" style="margin: 10px;">Zoek:</label>
        <input class="form-control" type="text" id="q" name="q" placeholder="zoek een product"
          value="<%= searchQuery %>" aria-describedby="button-addon2" />
        <button class="btn btn-outline-secondary" type="submit" id="button-addon2">
          &#x1F50D;
        </button>
      </form>
      <!--zoekbalk-->
    </form>

    <!--tabel met producten-->
    <div class="col-sm p-lg-5 mx-auto my-5">
      <table class="table align-middle mb-0 bg-white table-hover">
        <thead class="bg-light">
          <tr>
            <th> </th>
            <% for (let field of sortFields) { %>
              <th>
                <a
                  href="?sortField=<%= field.value %>&sortDirection=<%= field.value === sortField ? sortDirection === 'asc' ? 'desc' : 'asc' : 'asc' %>">
                  <%= field.text %>
                    <% if (field.value===sortField) { %> <%- sortDirection==='asc' ? '▲' : '▼' %>
                        <% } %>
                </a>
              </th>
              <% } %>
                <th>Details</th>
                <th>Aanpassen</th>
          </tr>
        </thead>
        <tbody>
          <% lamps.forEach(lamp=> { %>
            <tr>
              <td>
                <div class="d-flex align-items-center">
                  <img src="<%- lamp.foto %>" class="rounded" alt="image" style="width: 80px; height: 80px" />
                </div>
              </td>
              <td> &#9728; <%- lamp.naam %></td>
              <td class="fw-normal mb-1"> &#x1F4B2;&#8364; <%- lamp.prijs %></td>
              <td>&#x1F194;<%- lamp.id %></td>
              <td>&#x1F3A8;<%- lamp.kleur %></i></td>
              <td data-cell="Active">
                <svg width="10" height="10">
                  <circle cx="5" cy="5" r="5" fill="<%= lamp.actief ? 'green' : 'red' %>" />
                </svg>
              <td>
                <button type="button" class="btn btn-link btn-sm btn-rounded">
                  <a href="/lampDetail/<%= lamp.id %>" class="btn btn-primary"> &#x1F441; </a>
                </button>
              </td>
              <td><button type="button" class="btn btn-link btn-sm btn-rounded">
                  <a href="/lampEdit/<%= lamp.id %>" class="btn btn-primary"> &#x270F; </a>
                </button></td>
            </tr>
            <% }) %>
        </tbody>
      </table>
    </div>
  </main>
  <%- include('./partials/footer') %>